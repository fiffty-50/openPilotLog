<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>openPilotLog: NewFlightDialog Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="custom_dark_theme.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="icon_main.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">openPilotLog
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('class_new_flight_dialog.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="class_new_flight_dialog-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">NewFlightDialog Class Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="dynheader">
Inheritance diagram for NewFlightDialog:</div>
<div class="dyncontent">
 <div class="center">
  <img src="class_new_flight_dialog.png" alt=""/>
 </div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a28d14d3bf3c2a283c43456a25d97899d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_new_flight_dialog.html#a28d14d3bf3c2a283c43456a25d97899d">NewFlightDialog</a> (QWidget *parent=nullptr)</td></tr>
<tr class="memdesc:a28d14d3bf3c2a283c43456a25d97899d"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="class_new_flight_dialog.html">NewFlightDialog</a> create a new flight and add it to the logbook.  <a href="class_new_flight_dialog.html#a28d14d3bf3c2a283c43456a25d97899d">More...</a><br /></td></tr>
<tr class="separator:a28d14d3bf3c2a283c43456a25d97899d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad60b284ebebae287c00f0c9f30105f28"><td class="memItemLeft" align="right" valign="top"><a id="ad60b284ebebae287c00f0c9f30105f28"></a>
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_new_flight_dialog.html#ad60b284ebebae287c00f0c9f30105f28">NewFlightDialog</a> (int row_id, QWidget *parent=nullptr)</td></tr>
<tr class="memdesc:ad60b284ebebae287c00f0c9f30105f28"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="class_new_flight_dialog.html">NewFlightDialog</a> Edit an existing logbook entry. <br /></td></tr>
<tr class="separator:ad60b284ebebae287c00f0c9f30105f28"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a28d14d3bf3c2a283c43456a25d97899d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a28d14d3bf3c2a283c43456a25d97899d">&#9670;&nbsp;</a></span>NewFlightDialog()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">NewFlightDialog::NewFlightDialog </td>
          <td>(</td>
          <td class="paramtype">QWidget *&#160;</td>
          <td class="paramname"><em>parent</em> = <code>nullptr</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">explicit</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p><a class="el" href="class_new_flight_dialog.html">NewFlightDialog</a> create a new flight and add it to the logbook. </p>
<p>Construction ///.</p>
<p>[F] The general idea for this dialog is this:</p><ul>
<li>Most line edits have validators and completers.</li>
<li>Validators are based on regular expressions, serving as raw input validation</li>
<li>The Completers are based off the database and provide auto-completion</li>
<li>mandatory line edits only emit editing finished if their content has passed raw input validation or focus is lost.</li>
<li>Editing finished triggers validating inputs by mapping them to Database values where required and results in either pass or fail.</li>
<li>A QBitArray is mainained containing the state of validity of the mandatory line edits</li>
<li>The deducted entries are automatically filled if all mandatory entries are valid.</li>
<li>Comitting an entry to the database is only allowed if all mandatory inputs are valid.</li>
</ul>
<p>if the user presses "OK", check if all mandatory inputs are valid, check if optional user inputs are valid and commit.</p>
<p>For the completion and mapping, I have settled on a more low-level approach using Completers based on QStringLists and mapping with QMaps.</p>
<p>I implemented the Completers and mapping based on a QSqlTableModel which would have been quite nice, since it would keep all data in one place, providing both completion and mapping in one model. But as we have seen before with the more high-level qt classes, they are quite slow on execution when used for tasks they were probably not designed to do. Mapping a registration to an ID for example took around 300ms, which is very noticeable in the UI and not an acceptable user experience. Using QStringLists and QMaps this goes down to around 5ms. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>src/gui/dialogues/<a class="el" href="newflightdialog_8h_source.html">newflightdialog.h</a></li>
<li>src/gui/dialogues/newflightdialog.cpp</li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="class_new_flight_dialog.html">NewFlightDialog</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.17 </li>
  </ul>
</div>
</body>
</html>
